//Triggers//

CREATE OR REPLACE TRIGGER "DECREMENTDOCTORBYDEPT"
AFTER DELETE ON DOCTORS
FOR EACH ROW
DECLARE
 DEPTDOCTORS NUMBER(5);
BEGIN
 SELECT DEPARTMENT.COUNT INTO DEPTDOCTORS FROM DEPARTMENT
WHERE DEPARTMENT.DEPT_ID = :OLD.DEPT_ID;
 UPDATE DEPARTMENT SET COUNT = DEPTDOCTORS - 1 WHERE
DEPARTMENT.DEPT_ID = :OLD.DEPT_ID;
 DBMS_OUTPUT.PUT_LINE('UPDATED PATIENT COUNT');
END;

CREATE OR REPLACE TRIGGER "INCREMENTDOCTORBYDEPT"
AFTER INSERT ON DOCTORS
FOR EACH ROW
DECLARE
 DEPTDOCTORS NUMBER(5);
BEGIN
 SELECT DEPARTMENT.COUNT INTO DEPTDOCTORS FROM DEPARTMENT
WHERE DEPARTMENT.DEPT_ID = :NEW.DEPT_ID;
 UPDATE DEPARTMENT SET COUNT = DEPTDOCTORS + 1 WHERE
DEPARTMENT.DEPT_ID = :NEW.DEPT_ID;
 DBMS_OUTPUT.PUT_LINE('UPDATED PATIENT COUNT');
END;

CREATE OR REPLACE TRIGGER "DECREMENTPATIENTBYDOC"
AFTER DELETE ON PATIENTS
FOR EACH ROW
DECLARE
 DOCPAT NUMBER(5);
BEGIN
 SELECT DOCTORS.P_COUNT INTO DOCPAT FROM DOCTORS WHERE
DOCTORS.DOC_ID = :OLD.DOC_ID;
 UPDATE DOCTORS SET P_COUNT = DOCPAT - 1 WHERE DOCTORS.DOC_ID =
:OLD.DOC_ID;
 DBMS_OUTPUT.PUT_LINE('DECREMENTED DOCTOR COUNT');
END;

CREATE OR REPLACE TRIGGER "INCREMENTPATIENTBYDOC"
AFTER INSERT ON PATIENTS
FOR EACH ROW
DECLARE
 DOCPAT NUMBER(5);
BEGIN
 SELECT DOCTORS.P_COUNT INTO DOCPAT FROM DOCTORS WHERE
DOCTORS.DOC_ID = :NEW.DOC_ID;
 UPDATE DOCTORS SET P_COUNT = DOCPAT + 1 WHERE DOCTORS.DOC_ID =
:NEW.DOC_ID;
 DBMS_OUTPUT.PUT_LINE('UPDATED DOCTOR COUNT');
END;